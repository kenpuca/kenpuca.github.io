<!doctype html>

<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="viewport" 
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://kenpuca.github.io/css/syntax.css">
<link rel="stylesheet" href="https://kenpuca.github.io/css/style.css">

        
<link rel="stylesheet" href="https://kenpuca.github.io/css/single.css">
<script>
var disqus_developer = 2;
</script>

    </head>
    <body>
        
    <div class="single container  summer-school">
    
    <h1 class="single-title"> Installation </h1>
    

    





    

<h1 id="leiningen">Leiningen</h1>

<p>We assume that the development environment is either Linux or macos.</p>

<ol>
<li>Make sure you have Java runtime environment installed.</li>
<li>Download the <a href="https://leiningen.org/#install">lein script</a>.  It is the compiler toolchain.</li>
<li>Run <code>lein</code> as an executable script, and it will automatically install the
necessary Clojure compiler and libraries.</li>
</ol>

<h1 id="create-a-project">Create a project</h1>

<pre><code>$ lein new hello-world

Generating a project called hello-world based on the 'default' template.
The default template is intended for library projects, not applications.
To see other templates (app, plugin, etc), try `lein help new`.
</code></pre>

<p>The empty project has a function declared <code>foo</code> which we can choose to run:</p>

<pre><code>$ lein run -m hello-world.core/foo Blah   
Blah Hello, World!
</code></pre>

<h1 id="clojure-error-messages-are-ugly">Clojure error messages are <strong>ugly</strong></h1>

<p>Suppose we inject a run-time error into <code>foo</code>:</p>

<pre><code>(defn foo [x]
  (println (* x 2) &quot;: hello world&quot;))
</code></pre>

<p>This leads to a run-time error, and with a rather
unreadable stack trace.</p>

<pre><code>    $ lein run -m hello-world.core/foo Blah
    Exception in thread &quot;main&quot; java.lang.ClassCastException: java.lang.String cannot
    be cast to java.lang.Number,
    compiling:(/tmp/form-init1872070180712311231.clj:1:73)
        at clojure.lang.Compiler.load(Compiler.java:7391)
        at clojure.lang.Compiler.loadFile(Compiler.java:7317)
        at clojure.main$load_script.invokeStatic(main.clj:275)
        at clojure.main$init_opt.invokeStatic(main.clj:277)
        at clojure.main$init_opt.invoke(main.clj:277)
        at clojure.main$initialize.invokeStatic(main.clj:308)
        at clojure.main$null_opt.invokeStatic(main.clj:342)
        at clojure.main$null_opt.invoke(main.clj:339)
        at clojure.main$main.invokeStatic(main.clj:421)
        at clojure.main$main.doInvoke(main.clj:384)
        at clojure.lang.RestFn.invoke(RestFn.java:421)
        at clojure.lang.Var.invoke(Var.java:383)
        at clojure.lang.AFn.applyToHelper(AFn.java:156)
        at clojure.lang.Var.applyTo(Var.java:700)
        at clojure.main.main(main.java:37)
    Caused by: java.lang.ClassCastException: java.lang.String cannot be cast to
    java.lang.Number
        at clojure.lang.Numbers.multiply(Numbers.java:148)
        at clojure.lang.Numbers.multiply(Numbers.java:3740)
        at hello_world.core$foo.invokeStatic(core.clj:6)
        at hello_world.core$foo.invoke(core.clj:3)
        at clojure.lang.Var.invoke(Var.java:379)
        at user$eval2820.invokeStatic(form-init1872070180712311231.clj:1)
        at user$eval2820.invoke(form-init1872070180712311231.clj:1)
        at clojure.lang.Compiler.eval(Compiler.java:6927)
        at clojure.lang.Compiler.eval(Compiler.java:6917)
        at clojure.lang.Compiler.load(Compiler.java:7379)
        ... 14 more
</code></pre>

<div class="remark"><p>The reason that the stack trace so unreadable is because
it is generated by the Java VM.</p>
</div>


<h1 id="leiningen-s-project-clj">Leiningen&rsquo;s <code>project.clj</code></h1>

<p>Leiningen uses Clojure data structure to configure the project.</p>

<p>We will add a really cool stack trace formatter.</p>

<div class="box"><pre><code>(defproject hello-world &quot;0.1.0-SNAPSHOT&quot;
  :plugins [[io.aviso/pretty &quot;0.1.34&quot;]]
  :dependencies [[org.clojure/clojure &quot;1.8.0&quot;]
                 [io.aviso/pretty &quot;0.1.34&quot;]])
</code></pre>
</div>


<p>Let&rsquo;s run the erroneous <code>foo</code> function.</p>

<pre><code>    $ lein run -m hello-world.core/foo Blah
    1 â†µ
    Uncaught exception in thread main:
           clojure.main.main  main.java:  37
                         ...                
           clojure.main/main   main.clj: 384
           clojure.main/main   main.clj: 421
       clojure.main/null-opt   main.clj: 342
     clojure.main/initialize   main.clj: 308
       clojure.main/init-opt   main.clj: 277
    clojure.main/load-script   main.clj: 275
                         ...                
               user/eval3108  REPL Input    
                         ...                
        hello-world.core/foo   core.clj:   6
                         ...                
               java.lang.ClassCastException: java.lang.String cannot be cast to
    java.lang.Number
    clojure.lang.Compiler$CompilerException: java.lang.ClassCastException:
    java.lang.String cannot be cast to java.lang.Number,
    compiling:(/tmp/form-init3260028141421924083.clj:1:73)
</code></pre>


    
</div>

    <div class="container comments no-print"> <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "kenpuca" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> </div>

        
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'UA-52618243-1', 'auto');
ga('send', 'pageview');
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>


        
  


    </body>
</html>
